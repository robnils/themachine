from __future__ import unicode_literals

import unittest
from unittest import TestCase

import numpy

from facial.face import Identification, Colours, Camera, Display
from run_tests import FAST_TESTS


class TestWebcam(TestCase):
    def test_get_colours_works(self):
        colour = Identification.get_color()
        self.assertEquals(colour, {
            'colour': Colours.red,
            'text_color': Colours.white
        })
    
    @unittest.skipIf(FAST_TESTS, "Slow to start up")
    def test_camera_starts(self):
        c = Camera()
        c_obj = c.start()
        self.assertTrue(isinstance(c_obj, Camera))
    
    def test_hash_face(self):
        face_encoding = numpy.array([-0.09928095, 0.02876773, 0.08301625 - 0.01786253 - 0.11467769 - 0.06984556
                                     - 0.09226289 - 0.07875163, 0.14177328 - 0.11419946, 0.23944406 - 0.06374541
                                     - 0.2362114, -0.03753553, 0.00415535, 0.059833, -0.08469778 - 0.06651356
                                     - 0.04306101 - 0.0637009, 0.02111043, 0.05670154, 0.06578711, 0.07834129
                                     - 0.10807166 - 0.37628534 - 0.09856603 - 0.12616143, 0.03987437 - 0.08559085
                                     - 0.06121888, 0.0770085, -0.07885303 - 0.06060972, 0.00945153, 0.1075104
                                     - 0.08757061 - 0.10118559, 0.24471162 - 0.01470766 - 0.16134501 - 0.0632994
                                     - 0.01825085, 0.23996396, 0.14953046, 0.04047666, 0.05876771 - 0.06913615
                                        , 0.1405414, -0.28043249, 0.12652689, 0.17387381, 0.06682195, 0.05284799
                                        , 0.16449583 - 0.09677842, 0.04792668, 0.15034944 - 0.15043131, 0.11198805
                                        , 0.07584913 - 0.05537274, 0.03154165 - 0.04748492, 0.18497799, 0.08624321
                                     - 0.06821229 - 0.05897968, 0.10805534 - 0.17834713 - 0.0827069, 0.16546942
                                     - 0.09922202 - 0.23575144 - 0.23569939, 0.05274633, 0.3883425, 0.22426984
                                     - 0.12979478 - 0.00918669 - 0.04527804 - 0.08517255, 0.12983516, 0.02409999
                                     - 0.07802337 - 0.05367148 - 0.13856299, 0.02370861, 0.22872767, 0.00887914
                                     - 0.03026083, 0.28454298, 0.02838965, 0.06514216, 0.05955999, 0.06100722
                                     - 0.0712695, -0.02350787 - 0.07229128 - 0.00443594, 0.17317383 - 0.10951245
                                     - 0.01032914, 0.05583804 - 0.21201885, 0.11739785 - 0.06434162 - 0.00422161
                                        , 0.05705029 - 0.04298326 - 0.14025044 - 0.00059879, 0.20706604 - 0.25390348
                                        , 0.11567181, 0.13270865, 0.07719692, 0.16102436, 0.05457387, 0.02464934
                                     - 0.01563186 - 0.15013304 - 0.14237568 - 0.08421913, 0.06354876, 0.0354954
                                        , 0.02712629, 0.03805835])
        face_hash = Display.hash_face(face_encoding)
        self.assertEquals(face_hash, '955f89fdbb761e3192406b546c62ea3b')



